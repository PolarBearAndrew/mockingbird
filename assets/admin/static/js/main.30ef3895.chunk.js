(this["webpackJsonpmockingbird-prototype"]=this["webpackJsonpmockingbird-prototype"]||[]).push([[0],{414:function(e,t,n){},415:function(e,t,n){"use strict";n.r(t);var r,c=n(2),a=n(0),i=n(21),s=n.n(i),o=n(28),u=n(29),d=n(416),l=n(70),j=n(39),p=n(6),b=n(85),x=n(422),h=n(419),f=n(428),O=n(429),y=n(430),v=[{path:"/admin/routes",title:"Proxy & Mockers"},{path:"/admin/docs",title:"Documents"}],m="http://localhost:3000",k="http://localhost:3000/",g=window.io(k),w=Object(a.createContext)(g),C="#001529",M="#b457a0",S="#676669",T="#282c34",P="white",B="#52c41a",E="orange",I="#d34740";function A(){var e=Object(o.a)(["\n  padding-left: 8px;\n"]);return A=function(){return e},e}function R(){var e=Object(o.a)(["\n  height: 28px;\n"]);return R=function(){return e},e}function U(){var e=Object(o.a)(["\n  position: fixed;\n  bottom: 0;\n  margin: 0 0 24px 24px;\n  /* width: 232px; */\n"]);return U=function(){return e},e}!function(e){e.alive="alive",e.disconnect="disconnect",e.unknown="unknown"}(r||(r={}));var D={mockingbird:r.unknown,envoy:r.unknown};function q(e,t){switch(e){case r.alive:return Object(c.jsx)(b.a,{placement:"top",title:"Is alive.",children:Object(c.jsxs)(H,{children:[Object(c.jsx)("td",{width:24,children:Object(c.jsx)(x.a,{percent:100,showInfo:!1,steps:5,size:"small",strokeColor:B})}),Object(c.jsx)("td",{width:12,children:Object(c.jsx)(f.a,{style:{color:B}})}),Object(c.jsx)(J,{children:t})]})});case r.disconnect:return Object(c.jsx)(b.a,{placement:"top",title:"Disconnected.",children:Object(c.jsxs)(H,{children:[Object(c.jsx)("td",{children:Object(c.jsx)(x.a,{percent:33,showInfo:!1,steps:5,size:"small",strokeColor:I})}),Object(c.jsx)("td",{children:Object(c.jsx)(O.a,{style:{color:I}})}),Object(c.jsx)(J,{children:t})]})});case r.unknown:default:return Object(c.jsx)(b.a,{placement:"top",title:"Status unknown.",children:Object(c.jsxs)(H,{children:[Object(c.jsx)("td",{children:Object(c.jsx)(x.a,{percent:64,showInfo:!1,steps:5,size:"small",strokeColor:E})}),Object(c.jsx)("td",{children:Object(c.jsx)(y.a,{style:{color:E}})}),Object(c.jsx)(J,{children:t})]})})}}function L(){var e=h.a.Item,t=Object(a.useContext)(w),n=Object(a.useState)(D),i=Object(p.a)(n,2),s=i[0],o=i[1],u=Object(a.useCallback)((function(){t.on("connect",(function(){o({mockingbird:r.alive,envoy:r.unknown})})),t.on("disconnect",(function(){o({mockingbird:r.disconnect,envoy:r.unknown})}))}),[t]);return Object(a.useEffect)((function(){u()})),Object(c.jsxs)(h.a,{style:{width:256,height:"100%"},defaultSelectedKeys:[v[0].path],mode:"inline",children:[v.map((function(t,n){return Object(c.jsx)(e,{title:t.title,children:Object(c.jsx)(l.b,{exact:!0,to:t.path,children:t.title},n)},t.path)})),Object(c.jsxs)(z,{children:[q(s.mockingbird,"Mockingbird Service"),q(s.envoy,"Envoy Proxy")]})]})}var z=u.a.table(U()),H=u.a.tr(R()),J=u.a.td(A()),V=n.p+"static/media/logo.4e3ea0cf.svg";function F(){var e=Object(o.a)(["\n  margin: 12px 12px 12px 5px;\n  color: ",";\n"]);return F=function(){return e},e}function G(){var e=Object(o.a)(["\n  width: 50px;\n  height: 50px;\n"]);return G=function(){return e},e}function N(){var e=d.a.Header;return Object(c.jsxs)(e,{style:{display:"flex",alignItems:"center",justifyContent:"left",padding:"0 18px"},children:[Object(c.jsx)(l.b,{to:"/admin",children:Object(c.jsx)(K,{src:V,alt:""})}),Object(c.jsx)(l.b,{to:"/admin",children:Object(c.jsx)(Q,{children:" Mockingbird "})})]})}var K=u.a.img(G()),Q=u.a.h1(F(),P),W=n(221);function X(){var e=Object(o.a)(["\n  animation: ",";\n  @keyframes blinker {\n    50% { opacity: 0; };\n  }\n"]);return X=function(){return e},e}function Y(){var e=Object(o.a)(["\n  display: flex;\n  justify-content: flex-start;\n"]);return Y=function(){return e},e}var Z=u.a.div(Y()),$=u.a.span(X(),(function(e){return e.blink?"blinker .8s step-start infinite":"none"})),_=function(e){var t=Object(a.useState)({idx:0,text:"",direction:1}),n=Object(p.a)(t,2),r=n[0],i=n[1],s=e.list,o=e.sentenceDelay,u=e.typingDelay,d=e.sentenceShowTime,l=e.backspaceDelay,j=Object(a.useCallback)((function(){-1!==r.direction||0!==r.text.length?r.text.length!==s[r.idx].length?setTimeout((function(){i({idx:r.idx,direction:r.direction,text:s[r.idx].substring(0,r.text.length+r.direction)})}),1===r.direction?u:l):setTimeout((function(){i({idx:r.idx,direction:-1,text:s[r.idx].substring(0,r.text.length-1)})}),d):setTimeout((function(){i({direction:1,text:"",idx:r.idx<s.length-1?r.idx+1:0})}),o)}),[s,o,u,d,l,r.direction,r.idx,r.text.length]);return Object(a.useEffect)((function(){setTimeout(j,0)}),[j]),Object(c.jsxs)(Z,{children:[r.text,Object(c.jsx)($,{blink:r.text.length===e.list[r.idx].length,children:"|"})]})};function ee(){var e=Object(o.a)(["\n  flex-grow: 3;\n  padding: 80px 0 180px 0; \n"]);return ee=function(){return e},e}function te(){var e=Object(o.a)(["\n  margin-left: calc(50% - 275px);\n  flex-grow: 1;\n  font-size: 3em;\n  display: flex;\n  justify-content: flex-start;\n"]);return te=function(){return e},e}function ne(){var e=Object(o.a)(["\n  font-size: 5em;\n"]);return ne=function(){return e},e}function re(){var e=Object(o.a)(["\n  width: 18%;\n  margin: 0 auto;\n  flex-grow: 1;\n"]);return re=function(){return e},e}function ce(){var e=Object(o.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  color: ",";\n  text-align: center;\n\n  display: flex;\n  text-align: center;\n  flex-direction: column;\n  height: 100%;\n  background-color: ",";\n  > * {\n    background-color: ",";\n  }\n"]);return ce=function(){return e},e}var ae=u.a.div(ce(),P,C,C),ie=u.a.img(re()),se=u.a.div(ne()),oe=u.a.div(te()),ue=u.a.div(ee()),de=function(){return Object(c.jsxs)(ae,{children:[Object(c.jsx)(d.a,{children:Object(c.jsx)(d.a.Header,{style:{backgroundColor:M}})}),Object(c.jsx)(ie,{src:V,alt:""}),Object(c.jsx)(se,{children:"Mockingbrid"}),Object(c.jsxs)(oe,{children:[Object(c.jsx)("span",{style:{color:M,marginRight:12},children:"Mockingbird"}),Object(c.jsx)("span",{style:{marginRight:12},children:"your"}),Object(c.jsx)("div",{children:Object(c.jsx)(_,{typingDelay:80,backspaceDelay:40,sentenceShowTime:2e3,sentenceDelay:600,list:["API drafts.","developing APIs.","chaos test.","canary update.","alpha release."]})})]}),Object(c.jsx)(l.b,{to:"/admin/routes",children:Object(c.jsx)(ue,{children:Object(c.jsx)(W.a,{ghost:!0,size:"large",children:"Get Start"})})})]})},le=n(1),je=n(12),pe=n.n(je),be=n(33),xe=n(434),he=n(435),fe=n(103),Oe=n(60),ye=n(417),ve=n(421);var me=function(e){if(!e.title)return null;var t=ve.a.Title;return Object(c.jsx)(t,{style:{margin:"24px 0 12px 0"},children:e.title})},ke=n(7),ge=n(423),we=n(424),Ce=n(420),Me=n(425),Se=n(426),Te=n(225),Pe=["success","info","error","warning"].reduce((function(e,t){return e[t]=function(e,n){return r=t,c=e,a=n,Te.a[r]({message:c,description:a,duration:20});var r,c,a},e}),{}),Be=ge.a.Option;function Ee(e){switch(e){case"toCreate":return"Create";case"toUpdate":return"save";default:throw new Error("unknown action")}}function Ie(e){var t=ve.a.Text,n=Object(a.useState)(e.data),r=Object(p.a)(n,2),i=r[0],s=r[1],o=function(e){return function(t){return s(Object(le.a)(Object(le.a)({},i),{},Object(ke.a)({},e,t)))}};return Object(c.jsx)(we.a,{title:"toCreate"===e.action?"Create a new mocker endpoint":"Update mocker ".concat(e.data.id),width:720,onClose:e.onClose,visible:e.visible,bodyStyle:{paddingBottom:80},footer:Object(c.jsxs)("div",{style:{textAlign:"right"},children:[Object(c.jsxs)(t,{type:"secondary",style:{marginRight:8},children:["Last update by ",e.data.createBy||"AndrewChen"]}),Object(c.jsx)(W.a,{onClick:e.onClose,style:{marginRight:8},children:"Cancel"}),Object(c.jsx)(W.a,{onClick:function(){return e.onComplete(i)},type:"primary",children:Ee(e.action)})]}),children:Object(c.jsxs)(Ce.a,{layout:"vertical",hideRequiredMark:!0,children:[Object(c.jsxs)(fe.a,{gutter:16,children:[Object(c.jsx)(Oe.a,{span:12,children:Object(c.jsx)(Ce.a.Item,{name:"reqMethod",label:"Method",initialValue:i.reqMethod,rules:[{required:!0,message:"Please select an HTTP method"}],children:Object(c.jsxs)(ge.a,{placeholder:"Please select an HTTP method",onChange:o("reqMethod"),children:[Object(c.jsx)(Be,{value:"GET",children:"GET"}),Object(c.jsx)(Be,{value:"POST",children:"POST"}),Object(c.jsx)(Be,{value:"PUT",children:"PUT"}),Object(c.jsx)(Be,{value:"DELETE",children:"DELETE"})]})})}),Object(c.jsx)(Oe.a,{span:12,children:Object(c.jsx)(Ce.a.Item,{name:"resStatus",label:"HTTP status code",initialValue:i.resStatus,rules:[{required:!0,message:"Please enter the HTTP status"}],children:Object(c.jsx)(Me.a,{placeholder:"200/201/403/404/500",onChange:function(e){try{o("resStatus")(parseInt(e.target.value,10))}catch(t){Pe.warning("Response status should be a number.","200/201/403/404/500")}}})})})]}),Object(c.jsx)(fe.a,{gutter:16,children:Object(c.jsx)(Oe.a,{span:24,children:Object(c.jsx)(Ce.a.Item,{name:"prefix",label:"Prefix",initialValue:i.prefix,rules:[{required:!0,message:"Please enter endpoint prefix"}],children:Object(c.jsx)(Me.a,{style:{width:"100%"},addonBefore:"http://localhost:10001",onChange:function(e){return o("prefix")(e.target.value)},placeholder:"/api/test/123"})})})}),Object(c.jsx)(fe.a,{gutter:16,children:Object(c.jsx)(Oe.a,{span:24,children:Object(c.jsx)(Ce.a.Item,{name:"resBody",label:"Response body",initialValue:i.resBody,rules:[{required:!0,message:"Enter the mock JSON you want."}],children:Object(c.jsx)(Me.a.TextArea,{rows:8,onChange:function(e){return o("resBody")(e.target.value)},placeholder:'{ "demo": true }'})})})}),Object(c.jsx)(fe.a,{gutter:16,children:Object(c.jsx)(Oe.a,{span:24,children:Object(c.jsx)(Ce.a.Item,{name:"desc",label:"Description",initialValue:i.desc,rules:[{required:!0,message:"please enter some descriptions"}],children:Object(c.jsx)(Me.a.TextArea,{rows:8,onChange:function(e){return o("desc")(e.target.value)},placeholder:"please enter some descriptions"})})})}),Object(c.jsx)(fe.a,{gutter:16,children:Object(c.jsx)(Oe.a,{span:8,children:Object(c.jsx)(Ce.a.Item,{children:Object(c.jsx)(Se.a,{checkedChildren:"active",unCheckedChildren:"inactive",checked:"active"===i.status,onChange:function(e){return o("status")(e?"active":"inactive")},defaultChecked:!0})})})})]})})}var Ae=n(418),Re=n(427);var Ue=function(e){if(!e.code)return null;var t;switch(100*Math.floor(e.code/100)){case 200:t=Object(c.jsx)(Re.a,{color:"green",children:e.code});break;case 400:t=Object(c.jsx)(Re.a,{color:"orange",children:e.code});break;case 500:t=Object(c.jsx)(Re.a,{color:"red",children:e.code});break;default:t=Object(c.jsx)(Re.a,{children:e.code})}return Object(c.jsx)(b.a,{placement:"top",title:"HTTP status code",children:t})},De=n(216),qe=n.n(De);function Le(){var e=Object(o.a)(["\n  padding: 16px 12px 2px 12px;\n  margin: 4px 0;\n  border-radius: 8px;\n  min-width: 400px;\n  max-width: 800px;\n  background-color: ","\n"]);return Le=function(){return e},e}var ze,He=u.a.div(Le(),T),Je=function(e){return Object(c.jsx)(He,{children:Object(c.jsx)(qe.a,{id:"json-pretty",style:{fontSize:".9em"},theme:{main:"line-height:1.3;color:".concat(S,";background:").concat(T,";overflow:auto;"),error:"line-height:1.3;color:".concat(S,";background:").concat(T,";overflow:auto;"),key:"color:#d19130;",string:"color:#91ba45;",value:"color:".concat(P,";"),boolean:"color:#cc4954;"},data:e.jsonStr})})},Ve=n(431),Fe=n(432),Ge=n(433),Ne=n(9),Ke=n(66),Qe=n.n(Ke),We=n(130),Xe=n.n(We);function Ye(){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(be.a)(pe.a.mark((function e(){var t;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe.a.get("".concat(m,"/api/mocker"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),Pe.error("listMockers failed",e.t0.message),e.abrupt("return",{mockers:[]});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function $e(e){return _e.apply(this,arguments)}function _e(){return(_e=Object(be.a)(pe.a.mark((function e(t){var n;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe.a.put("".concat(m,"/api/mocker/").concat(t.id),Object(le.a)({},Xe()(t,"id")));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error("update failed",e.t0),Pe.error("update failed",e.t0.message),e.abrupt("return",{});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function et(e){return tt.apply(this,arguments)}function tt(){return(tt=Object(be.a)(pe.a.mark((function e(t){var n;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe.a.post("".concat(m,"/api/mocker"),Object(le.a)({},t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error("create failed",e.t0,JSON.stringify(e.t0)),Pe.error("create failed",e.t0.message),e.abrupt("return",{});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(be.a)(pe.a.mark((function e(t){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe.a.delete("".concat(m,"/api/mocker/").concat(t));case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),console.error("delete failed",e.t0,JSON.stringify(e.t0)),Pe.error("delete failed",e.t0.message),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function ct(){return[]}function at(e,t){switch(t.type){case ze.RefreshList:return Array.isArray(t.payload)?Object(Ne.a)(t.payload):[];case ze.UpdateMocker:return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case ze.AddMocker:return[t.payload].concat(Object(Ne.a)(e));case ze.RemoveMocker:return e.filter((function(e){return e.id!==t.payload.id}));default:throw new Error}}function it(){var e=Object(o.a)(["\n  padding: 4px 0;\n"]);return it=function(){return e},e}function st(){var e=Object(o.a)(["\n  margin: 0 4px 0 0;\n"]);return st=function(){return e},e}function ot(){var e=Object(o.a)(["\n  display: flex;\n  width: 100%;\n"]);return ot=function(){return e},e}!function(e){e[e.RefreshList=0]="RefreshList",e[e.UpdateMocker=1]="UpdateMocker",e[e.AddMocker=2]="AddMocker",e[e.RemoveMocker=3]="RemoveMocker"}(ze||(ze={}));var ut,dt=u.a.div(ot()),lt=u.a.span(st()),jt=u.a.div(it()),pt=function(e){var t,n=ve.a.Text,r=e.mocker,a=e.mockerDispatcher,i=(t=a,function(){var e=Object(be.a)(pe.a.mark((function e(n){var r,c;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:ze.UpdateMocker,payload:Object(le.a)(Object(le.a)({},n),{},{status:"updating"})}),r="active"===n.status?"inactive":"active",e.next=4,$e(Object(le.a)(Object(le.a)({},n),{},{status:r}));case 4:(c=e.sent).mocker?(Pe.success("Successfully update mocker status to ".concat(r,"."),"Please wait few second for the backend service to update the Envoy proxy."),t({type:ze.UpdateMocker,payload:Object(le.a)({},c.mocker)})):t({type:ze.UpdateMocker,payload:Object(le.a)({},n)});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s=r.desc||"This mockers doesn't have any descriptions",o="active"===r.status?Object(c.jsx)(n,{strong:!0,type:"success",children:"Active"}):"inactive"===r.status?Object(c.jsx)(n,{children:"Inactive"}):"updating"===r.status?Object(c.jsx)(Ve.a,{style:{fontSize:13},spin:!0}):Object(c.jsx)(n,{type:"danger",children:"unknown"});return Object(c.jsxs)(Ae.a,{hoverable:!0,bordered:!1,extra:Object(c.jsx)("div",{style:{padding:"4px 12px"},onClick:function(){return i(r)},children:o}),title:"".concat(r.reqMethod," ").concat(r.prefix),style:{marginBottom:"24px",opacity:"active"===r.status?1:".5"},actions:[Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)(Fe.a,{onClick:function(){r.id?e.onDeleteBtnClick(r.id):Pe.warning("MockerId not found","")}},"delete"),Object(c.jsx)(Ge.a,{onClick:function(){r.id?e.onEditBtnClick(r.id):Pe.warning("MockerId not found","")}},"edit")],children:[Object(c.jsxs)(dt,{children:[Object(c.jsx)(lt,{children:Object(c.jsx)(Ue,{code:r.resStatus})}),Object(c.jsx)(lt,{children:Object(c.jsx)(Re.a,{children:"Mocker"})}),Object(c.jsx)(lt,{children:Object(c.jsx)(Re.a,{children:"ID  ".concat(r.id)})})]}),Object(c.jsx)(jt,{children:Object(c.jsx)(Je,{jsonStr:r.resBody})}),s.split("\n").map((function(e,t){return Object(c.jsxs)("span",{children:[Object(c.jsx)(n,{type:"secondary",children:e}),Object(c.jsx)("br",{})]},t)}))]})};function bt(e){return Object(c.jsx)(c.Fragment,{children:e.mockers.map((function(t,n){return Object(c.jsx)(pt,{mocker:t,onEditBtnClick:e.onEditBtnClick,onDeleteBtnClick:e.onDeleteBtnClick,mockerDispatcher:e.mockerDispatcher},n)}))})}function xt(){return ht.apply(this,arguments)}function ht(){return(ht=Object(be.a)(pe.a.mark((function e(){var t;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe.a.get("".concat(m,"/api/proxy"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),Pe.error("list proxy failed",e.t0.message),e.abrupt("return",{proxies:[]});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ft(){return[]}function Ot(e,t){switch(t.type){case ut.RefreshList:return Array.isArray(t.payload)?Object(Ne.a)(t.payload):[];case ut.UpdateProxy:return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case ut.AddProxy:return[t.payload].concat(Object(Ne.a)(e));case ut.RemoveProxy:return e.filter((function(e){return e.id!==t.payload.id}));default:throw new Error}}function yt(){var e=Object(o.a)(["\n  margin: 0 4px 0 0;\n"]);return yt=function(){return e},e}function vt(){var e=Object(o.a)(["\n  display: flex;\n  width: 100%;\n"]);return vt=function(){return e},e}!function(e){e[e.RefreshList=0]="RefreshList",e[e.UpdateProxy=1]="UpdateProxy",e[e.AddProxy=2]="AddProxy",e[e.RemoveProxy=3]="RemoveProxy"}(ut||(ut={}));var mt=u.a.div(vt()),kt=u.a.span(yt()),gt=function(e){var t=ve.a.Text,n=e.proxy,r=n.desc||"This proxy doesn't have any descriptions",a="active"===n.status?Object(c.jsx)(t,{strong:!0,type:"success",children:"Active"}):"inactive"===n.status?Object(c.jsx)(t,{children:"Inactive"}):"updating"===n.status?Object(c.jsx)(Ve.a,{style:{fontSize:13},spin:!0}):Object(c.jsx)(t,{type:"danger",children:"unknown"});return Object(c.jsxs)(Ae.a,{hoverable:!0,bordered:!1,extra:Object(c.jsx)("div",{style:{padding:"4px 12px"},children:a}),title:"".concat(n.reqMethod," ").concat(n.prefix),style:{marginBottom:"24px",opacity:"active"===n.status?1:".5"},actions:[Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)("span",{}),Object(c.jsx)(Fe.a,{disabled:!0},"delete"),Object(c.jsx)(Ge.a,{disabled:!0},"edit")],children:[Object(c.jsxs)(mt,{children:[Object(c.jsx)(kt,{children:Object(c.jsx)(Re.a,{children:"Proxy"})}),Object(c.jsx)(kt,{children:Object(c.jsx)(Re.a,{children:"ID  ".concat(n.id)})})]}),r.split("\n").map((function(e,n){return Object(c.jsxs)("span",{children:[Object(c.jsx)(t,{type:"secondary",children:e}),Object(c.jsx)("br",{})]},n)}))]})};function wt(e){return Object(c.jsx)(c.Fragment,{children:e.proxies.map((function(e,t){return Object(c.jsx)(gt,{proxy:e},t)}))})}function Ct(){var e=Object(o.a)(["\n  display: flex;\n  width: 200px;\n  justify-content: flex-start;\n\n  > * {\n    margin-right: 12px;\n  }\n"]);return Ct=function(){return e},e}function Mt(){var e=Object(o.a)(["\n  padding: 0 0 0 24px;\n"]);return Mt=function(){return e},e}var St={prefix:"",reqMethod:"GET",resStatus:200,resBody:"",desc:"",createBy:"AndrewChen",status:"active"};var Tt=u.a.div(Mt()),Pt=u.a.div(Ct()),Bt=function(){var e,t=Object(a.useReducer)(at,[],ct),n=Object(p.a)(t,2),r=n[0],i=n[1],s=Object(a.useReducer)(Ot,[],ft),o=Object(p.a)(s,2),u=o[0],d=o[1],l=Object(a.useState)(!1),j=Object(p.a)(l,2),b=j[0],x=j[1],h=(e=d,Object(be.a)(pe.a.mark((function t(){var n;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xt();case 2:n=t.sent,e({type:ut.RefreshList,payload:n.proxies});case 4:case"end":return t.stop()}}),t)})))),f=function(e){return Object(be.a)(pe.a.mark((function t(){var n;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ye();case 2:n=t.sent,e({type:ze.RefreshList,payload:n.mockers});case 4:case"end":return t.stop()}}),t)})))}(i),O=function(e){return function(){var t=Object(be.a)(pe.a.mark((function t(n){var r;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,et(Object(le.a)({},n));case 2:if((r=t.sent).mocker){t.next=5;break}return t.abrupt("return",!1);case 5:return Pe.success("Successfully create a new mocker.","Please wait few second for the backend service to update the Envoy proxy."),e({type:ze.AddMocker,payload:Object(le.a)({},r.mocker)}),t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(i),y=function(e){return function(){var t=Object(be.a)(pe.a.mark((function t(n){var r;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:ze.UpdateMocker,payload:Object(le.a)(Object(le.a)({},n),{},{status:"updating"})}),t.next=3,$e(Object(le.a)({},n));case 3:if((r=t.sent).mocker){t.next=7;break}return e({type:ze.UpdateMocker,payload:Object(le.a)({},n)}),t.abrupt("return",!1);case 7:return Pe.success("Successfully update mocker.","Please wait few second for the backend service to update the Envoy proxy."),e({type:ze.UpdateMocker,payload:Object(le.a)({},r.mocker)}),t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(i),v=function(e){return function(){var t=Object(be.a)(pe.a.mark((function t(n){return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt(n);case 2:if(t.sent){t.next=5;break}return t.abrupt("return",!1);case 5:return Pe.success("Successfully create a new mocker.","Please wait few second for the backend service to update the Envoy proxy."),e({type:ze.RemoveMocker,payload:{id:n}}),t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(i),m=Object(a.useState)({visible:!1}),k=Object(p.a)(m,2),g=k[0],w=k[1];return Object(a.useEffect)((function(){0===r.length&&(x(!0),setTimeout((function(){f(),h(),x(!1)}),800))}),[r.length,f,h]),Object(c.jsxs)(Tt,{children:[Object(c.jsx)(me,{title:"Proxy & Mockers"}),Object(c.jsxs)(Pt,{children:[Object(c.jsx)(W.a,{type:"primary",shape:"circle",icon:Object(c.jsx)(xe.a,{}),onClick:function(){return w({visible:!0,action:"toCreate"})}}),Object(c.jsx)(W.a,{shape:"circle",loading:b,icon:Object(c.jsx)(he.a,{}),onClick:Object(be.a)(pe.a.mark((function e(){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,f();case 3:return e.next=5,h();case 5:setTimeout((function(){return x(!1)}),650);case 6:case"end":return e.stop()}}),e)})))})]}),Object(c.jsx)(fe.a,{gutter:16,children:Object(c.jsxs)(Oe.a,{span:12,children:[Object(c.jsx)(ye.a,{orientation:"left",children:"Mockers"}),Object(c.jsx)(bt,{mockers:r,onDeleteBtnClick:v,onEditBtnClick:function(e){var t=r.find((function(t){return t.id===e}));t?w({visible:!0,action:"toUpdate",data:t}):Pe.warning("Start editor failed","Mocker ".concat(e," not found"))},mockerDispatcher:i})]})}),Object(c.jsx)(fe.a,{gutter:16,children:Object(c.jsxs)(Oe.a,{span:12,children:[Object(c.jsx)(ye.a,{orientation:"left",children:"Proxies"}),Object(c.jsx)(wt,{proxies:u})]})}),g.visible&&Object(c.jsx)(Ie,{action:g.action,visible:g.visible,data:"toUpdate"===g.action?g.data:Object(le.a)({},St),onClose:function(){return w({visible:!1})},onComplete:function(){var e=Object(be.a)(pe.a.mark((function e(t){var n;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,"toCreate"!==g.action){e.next=7;break}return e.next=4,O({prefix:t.prefix,reqMethod:t.reqMethod,resStatus:t.resStatus,resBody:t.resBody,desc:t.desc,createBy:t.createBy,status:t.status});case 4:n=e.sent,e.next=11;break;case 7:if("toUpdate"!==g.action){e.next=11;break}return e.next=10,y({id:t.id,prefix:t.prefix,reqMethod:t.reqMethod,resStatus:t.resStatus,resBody:t.resBody,desc:t.desc,createBy:t.createBy,status:t.status});case 10:n=e.sent;case 11:n&&w({visible:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})};n(414);function Et(){var e=Object(o.a)(['\n  padding: 0;\n  margin: 0;\n  font-size: .9em;\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol" !important; // ??\n']);return Et=function(){return e},e}var It=u.a.div(Et()),At=function(){var e=d.a.Sider,t=d.a.Content,n=d.a.Footer;return Object(c.jsx)(It,{className:"App",children:Object(c.jsx)(l.a,{children:Object(c.jsxs)(j.c,{children:[Object(c.jsx)(j.a,{exact:!0,path:"/admin",children:Object(c.jsx)(de,{})}),Object(c.jsx)(j.a,{path:"/",children:Object(c.jsxs)(d.a,{children:[Object(c.jsx)(N,{}),Object(c.jsxs)(d.a,{children:[Object(c.jsx)(e,{width:256,children:Object(c.jsx)(L,{})}),Object(c.jsxs)(t,{children:[Object(c.jsx)(j.c,{children:Object(c.jsx)(j.a,{exact:!0,path:"/admin/routes",children:Object(c.jsx)(Bt,{})})}),Object(c.jsx)(n,{children:"Made by AndrewChen"})]})]})]})})]})})})};s.a.render(Object(c.jsx)(At,{}),document.getElementById("root"))}},[[415,1,2]]]);
//# sourceMappingURL=main.30ef3895.chunk.js.map