(this["webpackJsonpmockingbird-prototype"]=this["webpackJsonpmockingbird-prototype"]||[]).push([[0],{414:function(e,t,n){},415:function(e,t,n){"use strict";n.r(t);var r=n(3),c=n(0),a=n(21),i=n.n(a),s=n(28),o=n(29),u=n(416),d=n(70),l=n(39),j=n(6),p=n(422),b=n(419),x=n(428),h=n(429),f=n(430),O=n(431),y=[{path:"/admin/routes",title:"Proxy & Mockers"},{path:"/admin/docs",title:"Documents"}],v="http://localhost:3000",m={host:"http://localhost:3000/"},g=window.io("".concat(m.host)),k=Object(c.createContext)(g);var w,C="#001529",M="#b457a0",S="#676669",T="#282c34",P="white",B="#52c41a",E="orange",A="#d34740";function I(){var e=Object(s.a)(["\n  padding-left: 8px;\n"]);return I=function(){return e},e}function R(){var e=Object(s.a)(["\n  height: 28px;\n"]);return R=function(){return e},e}function U(){var e=Object(s.a)(["\n  position: fixed;\n  bottom: 0;\n  margin: 0 0 24px 24px;\n  /* width: 232px; */\n"]);return U=function(){return e},e}!function(e){e.alive="alive",e.disconnect="disconnect",e.unknown="unknown"}(w||(w={}));var D={mockingbird:w.unknown,envoy:w.unknown};function q(e,t){switch(e){case w.alive:return Object(r.jsxs)(H,{children:[Object(r.jsx)("td",{width:24,children:Object(r.jsx)(p.a,{percent:100,showInfo:!1,steps:5,size:"small",strokeColor:B})}),Object(r.jsx)("td",{width:12,children:Object(r.jsx)(x.a,{style:{color:B}})}),Object(r.jsx)(J,{children:t})]});case w.disconnect:return Object(r.jsxs)(H,{children:[Object(r.jsx)("td",{children:Object(r.jsx)(p.a,{percent:33,showInfo:!1,steps:5,size:"small",strokeColor:A})}),Object(r.jsx)("td",{children:Object(r.jsx)(h.a,{style:{color:A}})}),Object(r.jsx)(J,{children:t})]});case w.unknown:default:return Object(r.jsxs)(H,{children:[Object(r.jsx)("td",{children:Object(r.jsx)(p.a,{percent:64,showInfo:!1,steps:5,size:"small",strokeColor:E})}),Object(r.jsx)("td",{children:Object(r.jsx)(f.a,{style:{color:E}})}),Object(r.jsxs)(J,{children:[t,Object(r.jsx)(O.a,{spin:!0,style:{marginLeft:"4px"}})]})]})}}function L(){var e=b.a.Item,t=Object(c.useContext)(k),n=Object(c.useState)(D),a=Object(j.a)(n,2),i=a[0],s=a[1],o=Object(c.useCallback)((function(){t.on("connect",(function(){s({mockingbird:w.alive,envoy:w.unknown})})),t.on("status_event",(function(e){var t=function(e){try{return JSON.parse(e)}catch(t){return console.error("pareEventData failed",t),null}}(e);t&&s({mockingbird:t.mockingbird,envoy:t.envoy})})),t.on("disconnect",(function(){s({mockingbird:w.disconnect,envoy:w.unknown})}))}),[t]);return Object(c.useEffect)((function(){o()})),Object(r.jsxs)(b.a,{style:{width:256,height:"100%"},defaultSelectedKeys:[y[0].path],mode:"inline",children:[y.map((function(t,n){return Object(r.jsx)(e,{title:t.title,children:Object(r.jsx)(d.b,{exact:!0,to:t.path,children:t.title},n)},t.path)})),Object(r.jsx)(z,{children:Object(r.jsxs)("tbody",{children:[q(i.mockingbird,"Mockingbird Service"),q(i.envoy,"Envoy Proxy")]})})]})}var z=o.a.table(U()),H=o.a.tr(R()),J=o.a.td(I()),N=n.p+"static/media/logo.4e3ea0cf.svg";function V(){var e=Object(s.a)(["\n  margin: 12px 12px 12px 5px;\n  color: ",";\n"]);return V=function(){return e},e}function F(){var e=Object(s.a)(["\n  width: 50px;\n  height: 50px;\n"]);return F=function(){return e},e}function G(){var e=u.a.Header;return Object(r.jsxs)(e,{style:{display:"flex",alignItems:"center",justifyContent:"left",padding:"0 18px"},children:[Object(r.jsx)(d.b,{to:"/admin",children:Object(r.jsx)(K,{src:N,alt:""})}),Object(r.jsx)(d.b,{to:"/admin",children:Object(r.jsx)(_,{children:" Mockingbird "})})]})}var K=o.a.img(F()),_=o.a.h1(V(),P),Q=n(221);function W(){var e=Object(s.a)(["\n  animation: ",";\n  @keyframes blinker {\n    50% { opacity: 0; };\n  }\n"]);return W=function(){return e},e}function X(){var e=Object(s.a)(["\n  display: flex;\n  justify-content: flex-start;\n"]);return X=function(){return e},e}var Y=o.a.div(X()),Z=o.a.span(W(),(function(e){return e.blink?"blinker .8s step-start infinite":"none"})),$=function(e){var t=Object(c.useState)({idx:0,text:"",direction:1}),n=Object(j.a)(t,2),a=n[0],i=n[1],s=e.list,o=e.sentenceDelay,u=e.typingDelay,d=e.sentenceShowTime,l=e.backspaceDelay,p=Object(c.useCallback)((function(){-1!==a.direction||0!==a.text.length?a.text.length!==s[a.idx].length?setTimeout((function(){i({idx:a.idx,direction:a.direction,text:s[a.idx].substring(0,a.text.length+a.direction)})}),1===a.direction?u:l):setTimeout((function(){i({idx:a.idx,direction:-1,text:s[a.idx].substring(0,a.text.length-1)})}),d):setTimeout((function(){i({direction:1,text:"",idx:a.idx<s.length-1?a.idx+1:0})}),o)}),[s,o,u,d,l,a.direction,a.idx,a.text.length]);return Object(c.useEffect)((function(){setTimeout(p,0)}),[p]),Object(r.jsxs)(Y,{children:[a.text,Object(r.jsx)(Z,{blink:a.text.length===e.list[a.idx].length,children:"|"})]})};function ee(){var e=Object(s.a)(["\n  flex-grow: 3;\n  padding: 80px 0 180px 0; \n"]);return ee=function(){return e},e}function te(){var e=Object(s.a)(["\n  margin-left: calc(50% - 275px);\n  flex-grow: 1;\n  font-size: 3em;\n  display: flex;\n  justify-content: flex-start;\n"]);return te=function(){return e},e}function ne(){var e=Object(s.a)(["\n  font-size: 5em;\n"]);return ne=function(){return e},e}function re(){var e=Object(s.a)(["\n  width: 18%;\n  margin: 0 auto;\n  flex-grow: 1;\n"]);return re=function(){return e},e}function ce(){var e=Object(s.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100%;\n  width: 100%;\n  color: ",";\n  text-align: center;\n\n  display: flex;\n  text-align: center;\n  flex-direction: column;\n  height: 100%;\n  background-color: ",";\n  > * {\n    background-color: ",";\n  }\n"]);return ce=function(){return e},e}var ae=o.a.div(ce(),P,C,C),ie=o.a.img(re()),se=o.a.div(ne()),oe=o.a.div(te()),ue=o.a.div(ee()),de=function(){return Object(r.jsxs)(ae,{children:[Object(r.jsx)(u.a,{children:Object(r.jsx)(u.a.Header,{style:{backgroundColor:M}})}),Object(r.jsx)(ie,{src:N,alt:""}),Object(r.jsx)(se,{children:"Mockingbrid"}),Object(r.jsxs)(oe,{children:[Object(r.jsx)("span",{style:{color:M,marginRight:12},children:"Mockingbird"}),Object(r.jsx)("span",{style:{marginRight:12},children:"your"}),Object(r.jsx)("div",{children:Object(r.jsx)($,{typingDelay:80,backspaceDelay:40,sentenceShowTime:2e3,sentenceDelay:600,list:["API drafts.","developing APIs.","chaos test.","canary update.","alpha release."]})})]}),Object(r.jsx)(d.b,{to:"/admin/routes",children:Object(r.jsx)(ue,{children:Object(r.jsx)(Q.a,{ghost:!0,size:"large",children:"Get Start"})})})]})},le=n(1),je=n(12),pe=n.n(je),be=n(33),xe=n(435),he=n(436),fe=n(103),Oe=n(60),ye=n(417),ve=n(421);var me=function(e){if(!e.title)return null;var t=ve.a.Title;return Object(r.jsx)(t,{style:{margin:"24px 0 12px 0"},children:e.title})},ge=n(7),ke=n(423),we=n(424),Ce=n(420),Me=n(425),Se=n(426),Te=n(225),Pe=["success","info","error","warning"].reduce((function(e,t){return e[t]=function(e,n){return r=t,c=e,a=n,Te.a[r]({message:c,description:a,duration:20});var r,c,a},e}),{}),Be=ke.a.Option;function Ee(e){switch(e){case"toCreate":return"Create";case"toUpdate":return"save";default:throw new Error("unknown action")}}function Ae(e){var t=ve.a.Text,n=Object(c.useState)(e.data),a=Object(j.a)(n,2),i=a[0],s=a[1],o=function(e){return function(t){return s(Object(le.a)(Object(le.a)({},i),{},Object(ge.a)({},e,t)))}};return Object(r.jsx)(we.a,{title:"toCreate"===e.action?"Create a new mocker endpoint":"Update mocker ".concat(e.data.id),width:720,onClose:e.onClose,visible:e.visible,bodyStyle:{paddingBottom:80},footer:Object(r.jsxs)("div",{style:{textAlign:"right"},children:[Object(r.jsxs)(t,{type:"secondary",style:{marginRight:8},children:["Last update by ",e.data.createBy||"AndrewChen"]}),Object(r.jsx)(Q.a,{onClick:e.onClose,style:{marginRight:8},children:"Cancel"}),Object(r.jsx)(Q.a,{onClick:function(){return e.onComplete(i)},type:"primary",children:Ee(e.action)})]}),children:Object(r.jsxs)(Ce.a,{layout:"vertical",hideRequiredMark:!0,children:[Object(r.jsxs)(fe.a,{gutter:16,children:[Object(r.jsx)(Oe.a,{span:12,children:Object(r.jsx)(Ce.a.Item,{name:"reqMethod",label:"Method",initialValue:i.reqMethod,rules:[{required:!0,message:"Please select an HTTP method"}],children:Object(r.jsxs)(ke.a,{placeholder:"Please select an HTTP method",onChange:o("reqMethod"),children:[Object(r.jsx)(Be,{value:"GET",children:"GET"}),Object(r.jsx)(Be,{value:"POST",children:"POST"}),Object(r.jsx)(Be,{value:"PUT",children:"PUT"}),Object(r.jsx)(Be,{value:"DELETE",children:"DELETE"})]})})}),Object(r.jsx)(Oe.a,{span:12,children:Object(r.jsx)(Ce.a.Item,{name:"resStatus",label:"HTTP status code",initialValue:i.resStatus,rules:[{required:!0,message:"Please enter the HTTP status"}],children:Object(r.jsx)(Me.a,{placeholder:"200/201/403/404/500",onChange:function(e){try{o("resStatus")(parseInt(e.target.value,10))}catch(t){Pe.warning("Response status should be a number.","200/201/403/404/500")}}})})})]}),Object(r.jsx)(fe.a,{gutter:16,children:Object(r.jsx)(Oe.a,{span:24,children:Object(r.jsx)(Ce.a.Item,{name:"prefix",label:"Prefix",initialValue:i.prefix,rules:[{required:!0,message:"Please enter endpoint prefix"}],children:Object(r.jsx)(Me.a,{style:{width:"100%"},addonBefore:"http://localhost:10001",onChange:function(e){return o("prefix")(e.target.value)},placeholder:"/api/test/123"})})})}),Object(r.jsx)(fe.a,{gutter:16,children:Object(r.jsx)(Oe.a,{span:24,children:Object(r.jsx)(Ce.a.Item,{name:"resBody",label:"Response body",initialValue:i.resBody,rules:[{required:!0,message:"Enter the mock JSON you want."}],children:Object(r.jsx)(Me.a.TextArea,{rows:8,onChange:function(e){return o("resBody")(e.target.value)},placeholder:'{ "demo": true }'})})})}),Object(r.jsx)(fe.a,{gutter:16,children:Object(r.jsx)(Oe.a,{span:24,children:Object(r.jsx)(Ce.a.Item,{name:"desc",label:"Description",initialValue:i.desc,rules:[{required:!0,message:"please enter some descriptions"}],children:Object(r.jsx)(Me.a.TextArea,{rows:8,onChange:function(e){return o("desc")(e.target.value)},placeholder:"please enter some descriptions"})})})}),Object(r.jsx)(fe.a,{gutter:16,children:Object(r.jsx)(Oe.a,{span:8,children:Object(r.jsx)(Ce.a.Item,{children:Object(r.jsx)(Se.a,{checkedChildren:"active",unCheckedChildren:"inactive",checked:"active"===i.status,onChange:function(e){return o("status")(e?"active":"inactive")},defaultChecked:!0})})})})]})})}var Ie=n(418),Re=n(427),Ue=n(85);var De=function(e){if(!e.code)return null;var t;switch(100*Math.floor(e.code/100)){case 200:t=Object(r.jsx)(Re.a,{color:"green",children:e.code});break;case 400:t=Object(r.jsx)(Re.a,{color:"orange",children:e.code});break;case 500:t=Object(r.jsx)(Re.a,{color:"red",children:e.code});break;default:t=Object(r.jsx)(Re.a,{children:e.code})}return Object(r.jsx)(Ue.a,{placement:"top",title:"HTTP status code",children:t})},qe=n(216),Le=n.n(qe);function ze(){var e=Object(s.a)(["\n  padding: 16px 12px 2px 12px;\n  margin: 4px 0;\n  border-radius: 8px;\n  min-width: 400px;\n  max-width: 800px;\n  background-color: ","\n"]);return ze=function(){return e},e}var He,Je=o.a.div(ze(),T),Ne=function(e){return Object(r.jsx)(Je,{children:Object(r.jsx)(Le.a,{id:"json-pretty",style:{fontSize:".9em"},theme:{main:"line-height:1.3;color:".concat(S,";background:").concat(T,";overflow:auto;"),error:"line-height:1.3;color:".concat(S,";background:").concat(T,";overflow:auto;"),key:"color:#d19130;",string:"color:#91ba45;",value:"color:".concat(P,";"),boolean:"color:#cc4954;"},data:e.jsonStr})})},Ve=n(432),Fe=n(433),Ge=n(434),Ke=n(9),_e=n(66),Qe=n.n(_e),We=n(130),Xe=n.n(We);function Ye(){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(be.a)(pe.a.mark((function e(){var t;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe.a.get("".concat(v,"/api/mocker"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),Pe.error("listMockers failed",e.t0.message),e.abrupt("return",{mockers:[]});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function $e(e){return et.apply(this,arguments)}function et(){return(et=Object(be.a)(pe.a.mark((function e(t){var n;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe.a.put("".concat(v,"/api/mocker/").concat(t.id),Object(le.a)({},Xe()(t,"id")));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error("update failed",e.t0),Pe.error("update failed",e.t0.message),e.abrupt("return",{});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function tt(e){return nt.apply(this,arguments)}function nt(){return(nt=Object(be.a)(pe.a.mark((function e(t){var n;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe.a.post("".concat(v,"/api/mocker"),Object(le.a)({},t));case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error("create failed",e.t0,JSON.stringify(e.t0)),Pe.error("create failed",e.t0.message),e.abrupt("return",{});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function rt(e){return ct.apply(this,arguments)}function ct(){return(ct=Object(be.a)(pe.a.mark((function e(t){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe.a.delete("".concat(v,"/api/mocker/").concat(t));case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),console.error("delete failed",e.t0,JSON.stringify(e.t0)),Pe.error("delete failed",e.t0.message),e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function at(){return[]}function it(e,t){switch(t.type){case He.RefreshList:return Array.isArray(t.payload)?Object(Ke.a)(t.payload):[];case He.UpdateMocker:return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case He.AddMocker:return[t.payload].concat(Object(Ke.a)(e));case He.RemoveMocker:return e.filter((function(e){return e.id!==t.payload.id}));default:throw new Error}}function st(){var e=Object(s.a)(["\n  padding: 4px 0;\n"]);return st=function(){return e},e}function ot(){var e=Object(s.a)(["\n  margin: 0 4px 0 0;\n"]);return ot=function(){return e},e}function ut(){var e=Object(s.a)(["\n  display: flex;\n  width: 100%;\n"]);return ut=function(){return e},e}!function(e){e[e.RefreshList=0]="RefreshList",e[e.UpdateMocker=1]="UpdateMocker",e[e.AddMocker=2]="AddMocker",e[e.RemoveMocker=3]="RemoveMocker"}(He||(He={}));var dt,lt=o.a.div(ut()),jt=o.a.span(ot()),pt=o.a.div(st()),bt=function(e){var t,n=ve.a.Text,c=e.mocker,a=e.mockerDispatcher,i=(t=a,function(){var e=Object(be.a)(pe.a.mark((function e(n){var r,c;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:He.UpdateMocker,payload:Object(le.a)(Object(le.a)({},n),{},{status:"updating"})}),r="active"===n.status?"inactive":"active",e.next=4,$e(Object(le.a)(Object(le.a)({},n),{},{status:r}));case 4:(c=e.sent).mocker?(Pe.success("Successfully update mocker status to ".concat(r,"."),"Please wait few second for the backend service to update the Envoy proxy."),t({type:He.UpdateMocker,payload:Object(le.a)({},c.mocker)})):t({type:He.UpdateMocker,payload:Object(le.a)({},n)});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),s=c.desc||"This mockers doesn't have any descriptions",o="active"===c.status?Object(r.jsx)(n,{strong:!0,type:"success",children:"Active"}):"inactive"===c.status?Object(r.jsx)(n,{children:"Inactive"}):"updating"===c.status?Object(r.jsx)(Ve.a,{style:{fontSize:13},spin:!0}):Object(r.jsx)(n,{type:"danger",children:"unknown"});return Object(r.jsxs)(Ie.a,{hoverable:!0,bordered:!1,extra:Object(r.jsx)("div",{style:{padding:"4px 12px"},onClick:function(){return i(c)},children:o}),title:"".concat(c.reqMethod," ").concat(c.prefix),style:{marginBottom:"24px",opacity:"active"===c.status?1:".5"},actions:[Object(r.jsx)("span",{}),Object(r.jsx)("span",{}),Object(r.jsx)("span",{}),Object(r.jsx)("span",{}),Object(r.jsx)("span",{}),Object(r.jsx)("span",{}),Object(r.jsx)(Fe.a,{onClick:function(){c.id?e.onDeleteBtnClick(c.id):Pe.warning("MockerId not found","")}},"delete"),Object(r.jsx)(Ge.a,{onClick:function(){c.id?e.onEditBtnClick(c.id):Pe.warning("MockerId not found","")}},"edit")],children:[Object(r.jsxs)(lt,{children:[Object(r.jsx)(jt,{children:Object(r.jsx)(De,{code:c.resStatus})}),Object(r.jsx)(jt,{children:Object(r.jsx)(Re.a,{children:"Mocker"})}),Object(r.jsx)(jt,{children:Object(r.jsx)(Re.a,{children:"ID  ".concat(c.id)})})]}),Object(r.jsx)(pt,{children:Object(r.jsx)(Ne,{jsonStr:c.resBody})}),s.split("\n").map((function(e,t){return Object(r.jsxs)("span",{children:[Object(r.jsx)(n,{type:"secondary",children:e}),Object(r.jsx)("br",{})]},t)}))]})};function xt(e){return Object(r.jsx)(r.Fragment,{children:e.mockers.map((function(t,n){return Object(r.jsx)(bt,{mocker:t,onEditBtnClick:e.onEditBtnClick,onDeleteBtnClick:e.onDeleteBtnClick,mockerDispatcher:e.mockerDispatcher},n)}))})}function ht(){return ft.apply(this,arguments)}function ft(){return(ft=Object(be.a)(pe.a.mark((function e(){var t;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qe.a.get("".concat(v,"/api/proxy"));case 3:return t=e.sent,e.abrupt("return",t.data);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0),Pe.error("list proxy failed",e.t0.message),e.abrupt("return",{proxies:[]});case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Ot(){return[]}function yt(e,t){switch(t.type){case dt.RefreshList:return Array.isArray(t.payload)?Object(Ke.a)(t.payload):[];case dt.UpdateProxy:return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case dt.AddProxy:return[t.payload].concat(Object(Ke.a)(e));case dt.RemoveProxy:return e.filter((function(e){return e.id!==t.payload.id}));default:throw new Error}}function vt(){var e=Object(s.a)(["\n  margin: 0 4px 0 0;\n"]);return vt=function(){return e},e}function mt(){var e=Object(s.a)(["\n  display: flex;\n  width: 100%;\n"]);return mt=function(){return e},e}!function(e){e[e.RefreshList=0]="RefreshList",e[e.UpdateProxy=1]="UpdateProxy",e[e.AddProxy=2]="AddProxy",e[e.RemoveProxy=3]="RemoveProxy"}(dt||(dt={}));var gt=o.a.div(mt()),kt=o.a.span(vt()),wt=function(e){var t=ve.a.Text,n=e.proxy,c=n.desc||"This proxy doesn't have any descriptions",a="active"===n.status?Object(r.jsx)(t,{strong:!0,type:"success",children:"Active"}):"inactive"===n.status?Object(r.jsx)(t,{children:"Inactive"}):"updating"===n.status?Object(r.jsx)(Ve.a,{style:{fontSize:13},spin:!0}):Object(r.jsx)(t,{type:"danger",children:"unknown"});return Object(r.jsxs)(Ie.a,{hoverable:!0,bordered:!1,extra:Object(r.jsx)("div",{style:{padding:"4px 12px"},children:a}),title:"".concat(n.reqMethod," ").concat(n.prefix),style:{marginBottom:"24px",opacity:"active"===n.status?1:".5"},actions:[Object(r.jsx)("span",{}),Object(r.jsx)("span",{}),Object(r.jsx)("span",{}),Object(r.jsx)("span",{}),Object(r.jsx)("span",{}),Object(r.jsx)("span",{}),Object(r.jsx)(Fe.a,{disabled:!0,style:{opacity:".1"}},"delete"),Object(r.jsx)(Ge.a,{disabled:!0,style:{opacity:".1"}},"edit")],children:[Object(r.jsxs)(gt,{children:[Object(r.jsx)(kt,{children:Object(r.jsx)(Re.a,{children:"Proxy"})}),Object(r.jsx)(kt,{children:Object(r.jsx)(Re.a,{children:"ID  ".concat(n.id)})})]}),c.split("\n").map((function(e,n){return Object(r.jsxs)("span",{children:[Object(r.jsx)(t,{type:"secondary",children:e}),Object(r.jsx)("br",{})]},n)}))]})};function Ct(e){return Object(r.jsx)(r.Fragment,{children:e.proxies.map((function(e,t){return Object(r.jsx)(wt,{proxy:e},t)}))})}function Mt(){var e=Object(s.a)(["\n  display: flex;\n  width: 200px;\n  justify-content: flex-start;\n\n  > * {\n    margin-right: 12px;\n  }\n"]);return Mt=function(){return e},e}function St(){var e=Object(s.a)(["\n  padding: 0 0 0 24px;\n"]);return St=function(){return e},e}var Tt={prefix:"",reqMethod:"GET",resStatus:200,resBody:"",desc:"",createBy:"AndrewChen",status:"active"};var Pt=o.a.div(St()),Bt=o.a.div(Mt()),Et=function(){var e,t=Object(c.useReducer)(it,[],at),n=Object(j.a)(t,2),a=n[0],i=n[1],s=Object(c.useReducer)(yt,[],Ot),o=Object(j.a)(s,2),u=o[0],d=o[1],l=Object(c.useState)(!1),p=Object(j.a)(l,2),b=p[0],x=p[1],h=(e=d,Object(be.a)(pe.a.mark((function t(){var n;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ht();case 2:n=t.sent,e({type:dt.RefreshList,payload:n.proxies});case 4:case"end":return t.stop()}}),t)})))),f=function(e){return Object(be.a)(pe.a.mark((function t(){var n;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ye();case 2:n=t.sent,e({type:He.RefreshList,payload:n.mockers});case 4:case"end":return t.stop()}}),t)})))}(i),O=function(e){return function(){var t=Object(be.a)(pe.a.mark((function t(n){var r;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,tt(Object(le.a)({},n));case 2:if((r=t.sent).mocker){t.next=5;break}return t.abrupt("return",!1);case 5:return Pe.success("Successfully create a new mocker.","Please wait few second for the backend service to update the Envoy proxy."),e({type:He.AddMocker,payload:Object(le.a)({},r.mocker)}),t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(i),y=function(e){return function(){var t=Object(be.a)(pe.a.mark((function t(n){var r;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e({type:He.UpdateMocker,payload:Object(le.a)(Object(le.a)({},n),{},{status:"updating"})}),t.next=3,$e(Object(le.a)({},n));case 3:if((r=t.sent).mocker){t.next=7;break}return e({type:He.UpdateMocker,payload:Object(le.a)({},n)}),t.abrupt("return",!1);case 7:return Pe.success("Successfully update mocker.","Please wait few second for the backend service to update the Envoy proxy."),e({type:He.UpdateMocker,payload:Object(le.a)({},r.mocker)}),t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(i),v=function(e){return function(){var t=Object(be.a)(pe.a.mark((function t(n){return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,rt(n);case 2:if(t.sent){t.next=5;break}return t.abrupt("return",!1);case 5:return Pe.success("Successfully create a new mocker.","Please wait few second for the backend service to update the Envoy proxy."),e({type:He.RemoveMocker,payload:{id:n}}),t.abrupt("return",!0);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(i),m=Object(c.useState)({visible:!1}),g=Object(j.a)(m,2),k=g[0],w=g[1];return Object(c.useEffect)((function(){0===a.length&&(x(!0),setTimeout((function(){f(),h(),x(!1)}),800))}),[a.length,f,h]),Object(r.jsxs)(Pt,{children:[Object(r.jsx)(me,{title:"Proxy & Mockers"}),Object(r.jsxs)(Bt,{children:[Object(r.jsx)(Q.a,{type:"primary",shape:"circle",icon:Object(r.jsx)(xe.a,{}),onClick:function(){return w({visible:!0,action:"toCreate"})}}),Object(r.jsx)(Q.a,{shape:"circle",loading:b,icon:Object(r.jsx)(he.a,{}),onClick:Object(be.a)(pe.a.mark((function e(){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,f();case 3:return e.next=5,h();case 5:setTimeout((function(){return x(!1)}),650);case 6:case"end":return e.stop()}}),e)})))})]}),Object(r.jsx)(fe.a,{gutter:16,children:Object(r.jsxs)(Oe.a,{span:12,children:[Object(r.jsx)(ye.a,{orientation:"left",children:"Mockers"}),Object(r.jsx)(xt,{mockers:a,onDeleteBtnClick:v,onEditBtnClick:function(e){var t=a.find((function(t){return t.id===e}));t?w({visible:!0,action:"toUpdate",data:t}):Pe.warning("Start editor failed","Mocker ".concat(e," not found"))},mockerDispatcher:i})]})}),Object(r.jsx)(fe.a,{gutter:16,children:Object(r.jsxs)(Oe.a,{span:12,children:[Object(r.jsx)(ye.a,{orientation:"left",children:"Proxies"}),Object(r.jsx)(Ct,{proxies:u})]})}),k.visible&&Object(r.jsx)(Ae,{action:k.action,visible:k.visible,data:"toUpdate"===k.action?k.data:Object(le.a)({},Tt),onClose:function(){return w({visible:!1})},onComplete:function(){var e=Object(be.a)(pe.a.mark((function e(t){var n;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,"toCreate"!==k.action){e.next=7;break}return e.next=4,O({prefix:t.prefix,reqMethod:t.reqMethod,resStatus:t.resStatus,resBody:t.resBody,desc:t.desc,createBy:t.createBy,status:t.status});case 4:n=e.sent,e.next=11;break;case 7:if("toUpdate"!==k.action){e.next=11;break}return e.next=10,y({id:t.id,prefix:t.prefix,reqMethod:t.reqMethod,resStatus:t.resStatus,resBody:t.resBody,desc:t.desc,createBy:t.createBy,status:t.status});case 10:n=e.sent;case 11:n&&w({visible:!1});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})]})};n(414);function At(){var e=Object(s.a)(['\n  padding: 0;\n  margin: 0;\n  font-size: .9em;\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol" !important; // ??\n']);return At=function(){return e},e}var It=o.a.div(At()),Rt=function(){var e=u.a.Sider,t=u.a.Content,n=u.a.Footer;return Object(r.jsx)(It,{className:"App",children:Object(r.jsx)(d.a,{children:Object(r.jsxs)(l.c,{children:[Object(r.jsx)(l.a,{exact:!0,path:"/admin",children:Object(r.jsx)(de,{})}),Object(r.jsx)(l.a,{path:"/",children:Object(r.jsxs)(u.a,{children:[Object(r.jsx)(G,{}),Object(r.jsxs)(u.a,{children:[Object(r.jsx)(e,{width:256,children:Object(r.jsx)(L,{})}),Object(r.jsxs)(t,{children:[Object(r.jsx)(l.c,{children:Object(r.jsx)(l.a,{exact:!0,path:"/admin/routes",children:Object(r.jsx)(Et,{})})}),Object(r.jsx)(n,{children:"Made by AndrewChen"})]})]})]})})]})})})};i.a.render(Object(r.jsx)(Rt,{}),document.getElementById("root"))}},[[415,1,2]]]);
//# sourceMappingURL=main.e81573fe.chunk.js.map